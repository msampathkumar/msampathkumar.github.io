
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal blog of Sampath Kumar M">
      
      
        <meta name="author" content="Sampath Kumar">
      
      
      
        <link rel="prev" href="../lesson-02/">
      
      
        <link rel="next" href="../..">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Lesson-03 - Google Cloud - Gemini Cookbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog-post-lesson-03" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Google Cloud - Gemini Cookbook" class="md-header__button md-logo" aria-label="Google Cloud - Gemini Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Google Cloud - Gemini Cookbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lesson-03
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Google Cloud - Gemini Cookbook" class="md-nav__button md-logo" aria-label="Google Cloud - Gemini Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"/></svg>

    </a>
    Google Cloud - Gemini Cookbook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Gemini Cookbook
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Gemini Cookbook
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-02
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lesson-03
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lesson-03
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#blog-post-lesson-03" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Post: Lesson 03
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-your-first-context-aware-gemini-chatbot-in-minutes-the-secret-to-speed-and-relevance" class="md-nav__link">
    <span class="md-ellipsis">
      üöÄ Build Your First Context-aware Gemini Chatbot in Minutes: The Secret to Speed and Relevance! ‚ö°
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üöÄ Build Your First Context-aware Gemini Chatbot in Minutes: The Secret to Speed and Relevance! ‚ö°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-understanding-context-why-its-your-chatbots-superpower" class="md-nav__link">
    <span class="md-ellipsis">
      1. Understanding Context: Why It's Your Chatbot's Superpower ü¶∏‚Äç‚ôÄÔ∏è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-in-context-learning-icl-guiding-with-examples-instantly" class="md-nav__link">
    <span class="md-ellipsis">
      2. In-Context Learning (ICL): Guiding with Examples, Instantly ‚ú®
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. In-Context Learning (ICL): Guiding with Examples, Instantly ‚ú®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-shot-learning-a-single-guiding-example" class="md-nav__link">
    <span class="md-ellipsis">
      One-Shot Learning: A Single Guiding Example ‚òùÔ∏è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#few-shot-learning-reinforcing-complex-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Few-Shot Learning: Reinforcing Complex Patterns üìö
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-system-instructions-setting-your-chatbots-personality-and-rules" class="md-nav__link">
    <span class="md-ellipsis">
      3. System Instructions: Setting Your Chatbot's Personality and Rules üìú
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-context-caching-reusing-static-information-efficiently" class="md-nav__link">
    <span class="md-ellipsis">
      4. Context Caching: Reusing Static Information Efficiently üì¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-it-works-a-two-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      How It Works: A Two-Step Process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-deploy-this-application-on-google-cloud-run" class="md-nav__link">
    <span class="md-ellipsis">
      To Deploy This Application on Google Cloud Run:
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-04/README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-04
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to MkDocs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#blog-post-lesson-03" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Post: Lesson 03
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-your-first-context-aware-gemini-chatbot-in-minutes-the-secret-to-speed-and-relevance" class="md-nav__link">
    <span class="md-ellipsis">
      üöÄ Build Your First Context-aware Gemini Chatbot in Minutes: The Secret to Speed and Relevance! ‚ö°
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üöÄ Build Your First Context-aware Gemini Chatbot in Minutes: The Secret to Speed and Relevance! ‚ö°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-understanding-context-why-its-your-chatbots-superpower" class="md-nav__link">
    <span class="md-ellipsis">
      1. Understanding Context: Why It's Your Chatbot's Superpower ü¶∏‚Äç‚ôÄÔ∏è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-in-context-learning-icl-guiding-with-examples-instantly" class="md-nav__link">
    <span class="md-ellipsis">
      2. In-Context Learning (ICL): Guiding with Examples, Instantly ‚ú®
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. In-Context Learning (ICL): Guiding with Examples, Instantly ‚ú®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-shot-learning-a-single-guiding-example" class="md-nav__link">
    <span class="md-ellipsis">
      One-Shot Learning: A Single Guiding Example ‚òùÔ∏è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#few-shot-learning-reinforcing-complex-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Few-Shot Learning: Reinforcing Complex Patterns üìö
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-system-instructions-setting-your-chatbots-personality-and-rules" class="md-nav__link">
    <span class="md-ellipsis">
      3. System Instructions: Setting Your Chatbot's Personality and Rules üìú
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-context-caching-reusing-static-information-efficiently" class="md-nav__link">
    <span class="md-ellipsis">
      4. Context Caching: Reusing Static Information Efficiently üì¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-it-works-a-two-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      How It Works: A Two-Step Process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-deploy-this-application-on-google-cloud-run" class="md-nav__link">
    <span class="md-ellipsis">
      To Deploy This Application on Google Cloud Run:
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Lesson-03</h1>

<h3 id="blog-post-lesson-03">Blog Post: Lesson 03</h3>
<h2 id="build-your-first-context-aware-gemini-chatbot-in-minutes-the-secret-to-speed-and-relevance">üöÄ Build Your First Context-aware Gemini Chatbot in Minutes: The Secret to Speed and Relevance! ‚ö°</h2>
<p><strong>Scenario:</strong> It's Tuesday, July 22, 2025, 12:26 PM CEST. You're a developer,
enjoying your morning coffee in Warsaw ‚òï, contemplating your next big feature.
Suddenly, your director bursts in: "We need a quick demo of a new,
context-aware chatbot for our internal knowledge base ‚Äì and the meeting is in
30 minutes! Can you get something ready?" ü§Ø</p>
<p>Panic? Absolutely not! Not with Gemini and Streamlit. This lesson is your
secret weapon to rapidly inject intelligence into your chatbot, focusing on
direct, consistent, and reusable context methods that get you up and running
with meaningful interactions fast. üöÄ</p>
<hr />
<h3 id="1-understanding-context-why-its-your-chatbots-superpower">1. Understanding Context: Why It's Your Chatbot's Superpower ü¶∏‚Äç‚ôÄÔ∏è</h3>
<p>Large Language Models (LLMs) like Gemini are incredible, but they're not
clairvoyant. Without explicit guidance, their responses can be generic, vague,
or even incorrect when faced with specific or domain-sensitive questions.
Context is the "secret sauce" that transforms a generic LLM into a specialized,
helpful chatbot. It's the information you provide to guide the model's
understanding and shape its output. üí°</p>
<p>Consider a simple chatbot built with Gemini and Streamlit. If you ask it a very
specific question without any context, it might struggle.</p>
<p><strong>Example: A Generic Chatbot Responding to a Specific Query</strong></p>
<p>Let's say your basic Streamlit app simply forwards user input to Gemini. If you
ask about an internal project:</p>
<pre><code class="language-bash">$ python llm.py

Chat session ID: 4383160272
Enter your question (or 'exit' to quit)

User: What are the key milestones for Project Alpha in Q3?

Model: I need a little more information to tell you about
   Project Alpha's Q3 milestones! Could you please tell me 
   more about what &quot;Project Alpha&quot; refers to? üòä

</code></pre>
<p>or via chatbot UI:</p>
<pre><code>streamlit run streamlit_app.py
</code></pre>
<p><img alt="Imagine a screenshot here: A Streamlit UI with a text input &quot;What are the key milestones for Project Alpha in Q3?&quot; and the chatbot's generic response as shown above. A big red X emoji could be placed next to the response to emphasize its inadequacy." src="image-01-without-context.png" /></p>
<p>This is where context comes in. By providing context, you tell Gemini exactly
what "Project Alpha" means in <em>your</em> world. ‚ú®</p>
<hr />
<h3 id="2-in-context-learning-icl-guiding-with-examples-instantly">2. In-Context Learning (ICL): Guiding with Examples, Instantly ‚ú®</h3>
<p>In-Context Learning (ICL) is the quickest way to demonstrate a desired output
pattern to Gemini. You provide explicit examples directly within your prompt,
and Gemini learns from these patterns without needing any fine-tuning. It's
like teaching by showing!</p>
<h4 id="one-shot-learning-a-single-guiding-example">One-Shot Learning: A Single Guiding Example ‚òùÔ∏è</h4>
<p>For simple tasks, one example might be all you need. You show Gemini a single
input-output pair, and it follows that pattern for subsequent queries.</p>
<p><strong>Use Case:</strong> Simple classification, rephrasing, or straightforward
translation. üåê</p>
<p><strong>Example: One-Shot Translation</strong></p>
<pre><code>User: Translate this English to French.
      English: Hello.
      French: Bonjour.
      English: What is your name?
      French:
Chatbot (With one-shot example): Quel est votre nom?
</code></pre>
<p><img alt="One shot translation example" src="image-02-one-shot-learning.png" /></p>
<h4 id="few-shot-learning-reinforcing-complex-patterns">Few-Shot Learning: Reinforcing Complex Patterns üìö</h4>
<p>When the task is more nuanced or requires a specific output format, providing a
few examples helps Gemini better grasp the pattern. It's like providing
multiple reference points for complex concepts.</p>
<p><strong>Use Case:</strong> More nuanced categorization, structured data extraction, or
adhering to specific stylistic requirements. üìã</p>
<p><strong>Example: Few-Shot Sentiment Analysis</strong></p>
<pre><code>
User: Review: The delivery was fast!
      Sentiment: Positive.

      Review: The product broke immediately.
      Sentiment: Negative.

      Review: The customer service was okay, but the delivery was slow.
      Sentiment:
Chatbot (With few-shot examples): Mixed/Neutral
</code></pre>
<p><img alt="Imagine a screenshot here: A Streamlit UI showing the user's multi-line prompt including the few-shot examples for sentiment analysis and the chatbot's accurate &quot;Mixed/Neutral&quot; categorization. Another green checkmark emoji." src="image-02-few-shot-learning.png" /></p>
<p><strong>Considerations:</strong> While powerful for quick guidance, ICL consumes tokens with
every prompt, which can impact cost and latency for very long examples or many
turns. üí∏üê¢</p>
<hr />
<h3 id="3-system-instructions-setting-your-chatbots-personality-and-rules">3. System Instructions: Setting Your Chatbot's Personality and Rules üìú</h3>
<p>System instructions define your chatbot's overarching persona, tone, and
behavioral guardrails. This is a foundational layer of context that applies to
<em>all</em> subsequent user turns in a chat session, making Gemini's responses
consistent and aligned with your brand or application's requirements. It's like
giving your bot a permanent job description! üßë‚Äçüíª</p>
<p>You define the "rules of engagement" for your chatbot, ensuring it behaves
predictably. üö¶</p>
<p><strong>Code Sample: llm.py (LLM Interaction Logic)</strong></p>
<p>System instructions are defined in the <code>llm.py</code> file.</p>
<pre><code>chat_session = client.chats.create(
   model=MODEL_NAME,
   config=GenerateContentConfig(
      system_instruction=[
       &quot;You're a helpful Gemini AI Chatbot.&quot;,
       &quot;Answer user's questions and use simple and clear language.&quot;
       &quot;When possible, reply to user's question with a single sentence or a few sentences.&quot;,
       &quot;Free to use emojis.&quot;
       &quot;Be open and friendly. Don't be afraid to ask questions or clarify things.&quot;,
      ]
  ),
)
</code></pre>
<hr />
<h3 id="4-context-caching-reusing-static-information-efficiently">4. Context Caching: Reusing Static Information Efficiently üì¶</h3>
<hr />
<p>Imagine your chatbot needs to be an expert on a fixed set of documents, like
internal reports, product manuals, or, in our case, specific research papers.
Sending these large documents with every single API call would be slow and
expensive. This is where <strong>Context Caching</strong> becomes a game-changer.</p>
<p>Gemini's Context Caching allows you to process and store static,
frequently-referenced content once. You then refer to this cached content using
a simple, lightweight name in your subsequent API calls. This drastically saves
tokens, reduces latency, and lowers costs, especially when dealing with large
files.</p>
<p><strong>Example Use Case</strong>: Let update our chatbot a chatbot to be expert on the
Gemini family of models, using two key research papers as its knowledge base.</p>
<ul>
<li>Paper 1: Gemini: A Family of Highly Capable Multimodal
  Models.(<a href="https://storage.cloud.google.com/cloud-samples-data/generative-ai/pdf/2312.11805v3.pdf">2312.11805v3.pdf</a>)</li>
<li>Paper 2: Gemini 1.5: Unlocking multimodal understanding across millions of
  tokens of context
  (<a href="https://storage.cloud.google.com/cloud-samples-data/generative-ai/pdf/2403.05530.pdf">2403.05530.pdf</a>)Instead
  of feeding these PDFs to the model repeatedly, we'll cache them and let our
  chatbot use that cached knowledge.</li>
</ul>
<h3 id="how-it-works-a-two-step-process">How It Works: A Two-Step Process</h3>
<p><strong>Step 1: Create the Cache</strong></p>
<p>First, you need to upload your static files and create a CachedContent object.
This is a one-time operation. You'll save the name of the cache to use in your
application later.</p>
<p>Full code:
https://github.com/GoogleCloudPlatform/python-docs-samples/blob/main/genai/content_cache/contentcache_create_with_txt_gcs_pdf.py</p>
<pre><code class="language-python">system_instruction = &quot;&quot;&quot;
You are an expert researcher.
You always stick to the facts in the sources provided, and never make up new facts.
Now look at these research papers, and answer the following questions.
&quot;&quot;&quot;

cache_objects = [
   Part.from_uri(
      file_uri=&quot;gs://cloud-samples-data/generative-ai/pdf/2312.11805v3.pdf&quot;,
      mime_type=&quot;application/pdf&quot;,
   ),
   Part.from_uri(
      file_uri=&quot;gs://cloud-samples-data/generative-ai/pdf/2403.05530.pdf&quot;,
      mime_type=&quot;application/pdf&quot;,
   )]

content_cache = client.caches.create(
   model=&quot;gemini-2.5-flash&quot;,
   config=CreateCachedContentConfig(
      contents=[Content(role=&quot;user&quot;, parts=cache_objects)],
      system_instruction=system_instruction,
      display_name=&quot;example-cache&quot;,
      ttl=&quot;86400s&quot;,
   ),
)
</code></pre>
<p><strong>Note</strong>: Cache is created with a TTL (time to live). After specific amount of
time, the cache will be deleted.</p>
<p>Once the cache is created you will a cache name (e.g.,
cachedContents/f1e2d3c4-a5b6-7890-a1b2-c3d4e5f6a7b8), which we will use with
chatbot.</p>
<p><strong>Step 2: Use the Cache in Your Chatbot</strong></p>
<p>Once the cache is created, you can use it in your chatbot by passing its name
in the <code>GenerateContentConfig</code> object. For example:</p>
<pre><code class="language-python">system_instruction = &quot;...&quot;
cache_name = &quot;projects/.../locations/us-central1/keyRings/.../cryptoKeys/...&quot;,

chat_session = client.chats.create(
   config=GenerateContentConfig(
      cached_content=cache_name,
      system_instruction=None if cache_name else system_instruction,
   )
)
</code></pre>
<p>Since the Cache has a defined timelimit, it required a little attention to
avoid any potential issues. So let create a CacheManager to manage the cache,
which will automatically clean up expired caches.</p>
<p>Here is the content for <code>cache.py</code></p>
<p>Examples:</p>
<p><strong>Here is the example of not using Context Cache:</strong></p>
<p><img alt="Without Using Context Cache" src="image-04-without-context-cache.png" /></p>
<p><strong>Here is the example of using Context Cache:</strong></p>
<p><img alt="With Context Cache" src="image-04-with-context-cache.png" /></p>
<h2 id="to-deploy-this-application-on-google-cloud-run"><strong>To Deploy This Application on Google Cloud Run:</strong></h2>
<ol>
<li>Clone this repository and navigate to the directory</li>
</ol>
<pre><code class="language-bash">git clone https://github.com/msampathkumar/msampathkumar.github.io.git
cd docs/google-cloud-gemini-cookbook/lesson-02
</code></pre>
<ol>
<li>Setup your virtual environment and install dependencies:</li>
</ol>
<pre><code class="language-bash">python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
</code></pre>
<ol>
<li>Run the application locally to make sure it works as expected.</li>
</ol>
<pre><code class="language-bash">streamlit run streamlit_app.py
</code></pre>
<ol>
<li>To deploy to Google Cloud Run, you can use the <code>deploy.sh</code> script:</li>
</ol>
<pre><code class="language-bash">bash deploy.sh
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2025 ¬© M Sampath Kumar
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>