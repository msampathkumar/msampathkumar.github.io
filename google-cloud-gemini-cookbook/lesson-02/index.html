
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal blog of Sampath Kumar M">
      
      
        <meta name="author" content="Sampath Kumar">
      
      
      
        <link rel="prev" href="../lesson-01/">
      
      
        <link rel="next" href="../lesson-03/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Lesson-02 - Google Cloud - Gemini Cookbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lesson-2-deploy-your-ai-chatbot-to-google-cloud-run-go-live" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Google Cloud - Gemini Cookbook" class="md-header__button md-logo" aria-label="Google Cloud - Gemini Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Google Cloud - Gemini Cookbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lesson-02
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Google Cloud - Gemini Cookbook" class="md-nav__button md-logo" aria-label="Google Cloud - Gemini Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"/></svg>

    </a>
    Google Cloud - Gemini Cookbook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Gemini Cookbook
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Gemini Cookbook
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lesson-02
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lesson-02
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-youll-create" class="md-nav__link">
    <span class="md-ellipsis">
      What You'll Create
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-youll-need" class="md-nav__link">
    <span class="md-ellipsis">
      What You'll Need
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What You&#39;ll Need">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mandatory-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Mandatory steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-get-building" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Get Building!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-look-under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      A Look Under the Hood
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A Look Under the Hood">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-chatbot-ui-streamlit_apppy" class="md-nav__link">
    <span class="md-ellipsis">
      The Chatbot UI: streamlit_app.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-brains-of-the-operation-llmpy" class="md-nav__link">
    <span class="md-ellipsis">
      The Brains of the Operation: llm.py
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Brains of the Operation: llm.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-run-chatbot-in-cli" class="md-nav__link">
    <span class="md-ellipsis">
      To run chatbot in CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-run-streamlit-chatbot" class="md-nav__link">
    <span class="md-ellipsis">
      To run streamlit chatbot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#you-did-it" class="md-nav__link">
    <span class="md-ellipsis">
      You Did It!
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-04/README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-04
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to MkDocs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-youll-create" class="md-nav__link">
    <span class="md-ellipsis">
      What You'll Create
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-youll-need" class="md-nav__link">
    <span class="md-ellipsis">
      What You'll Need
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What You&#39;ll Need">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mandatory-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Mandatory steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-get-building" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Get Building!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-look-under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      A Look Under the Hood
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A Look Under the Hood">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-chatbot-ui-streamlit_apppy" class="md-nav__link">
    <span class="md-ellipsis">
      The Chatbot UI: streamlit_app.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-brains-of-the-operation-llmpy" class="md-nav__link">
    <span class="md-ellipsis">
      The Brains of the Operation: llm.py
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Brains of the Operation: llm.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-run-chatbot-in-cli" class="md-nav__link">
    <span class="md-ellipsis">
      To run chatbot in CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-run-streamlit-chatbot" class="md-nav__link">
    <span class="md-ellipsis">
      To run streamlit chatbot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#you-did-it" class="md-nav__link">
    <span class="md-ellipsis">
      You Did It!
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lesson-2-deploy-your-ai-chatbot-to-google-cloud-run-go-live">Lesson 2: ☁️ Deploy Your AI Chatbot to Google Cloud Run: Go Live!</h1>
<p>Welcome to the second lesson in our Gemini Cookbook series! This time, we're
diving into the exciting world of conversational AI. You'll learn to build a
smart, interactive chatbot using the power of Streamlit and Google's Gemini 2.5
Flash model. We'll be using the official Google Cloud Vertex AI SDK, which has
powerful features like chat sessions that give your bot a memory.</p>
<p>GitHub Source:
<a href="https://github.com/msampathkumar/msampathkumar.github.io/tree/master/docs/google-cloud-gemini-cookbook/">Link</a></p>
<h2 id="what-youll-create">What You'll Create</h2>
<p>Get ready to build a sleek, web-based chatbot. With Streamlit as our frontend,
your chatbot will connect to the mighty Gemini 1.5 Flash model, enabling you to
have dynamic and stateful conversations. It's like having your own personal AI
assistant!</p>
<p><img alt="Your Streamlit Chatbot in Action" src="https://storage.googleapis.com/github-repo/img/lesson-02-streamlit-chatbot.png" /></p>
<h2 id="what-youll-need">What You'll Need</h2>
<p>To get started, make sure you have the following essentials:</p>
<ul>
<li>A Google Cloud project with the Vertex AI API ready to go.</li>
<li>Python 3.8 or a newer version.</li>
<li>The <code>pip</code> package manager for installing our dependencies.</li>
</ul>
<h3 id="mandatory-steps">Mandatory steps</h3>
<p>This is a mandatory steps to access Gemini Models from your Google Cloud
Project.</p>
<p>I have installed the Gcloud tool and used
<a href="https://cloud.google.com/docs/authentication/provide-credentials-adc">Application Default Credentials</a>
to get the credentials. If you want to run the code in Google Cloud project,
then you need to update respective service-account with the required
permissions. For details, check out this
<a href="https://cloud.google.com/docs/authentication/set-up-adc-attached-service-account">user-managed service account</a>
article.</p>
<h2 id="lets-get-building">Let's Get Building!</h2>
<ol>
<li><strong>Get the Code:</strong> First, clone the repository and hop into the right
   directory:</li>
</ol>
<p><code>bash
   git clone https://github.com/msampathkumar/msampathkumar.github.io.git
   cd msampathkumar.github.io/docs/google-cloud-gemini-cookbook/lesson-02</code></p>
<ol>
<li><strong>Set Up Your Workspace:</strong> Create a virtual environment to keep things tidy:</li>
</ol>
<p><code>bash
   python3 -m venv .venv
   source .venv/bin/activate</code></p>
<ol>
<li><strong>Install the Magic:</strong> Time to install the necessary Python packages:</li>
</ol>
<p><code>bash
   pip install -r requirements.txt</code></p>
<ol>
<li><strong>Connect to Google Cloud:</strong> Authenticate your local environment to use
   Google Cloud services:</li>
</ol>
<pre><code class="language-bash">gcloud auth application-default login
</code></pre>
<h2 id="a-look-under-the-hood">A Look Under the Hood</h2>
<p>Let's take a peek at the code that makes our chatbot tick.</p>
<h3 id="the-chatbot-ui-streamlit_apppy">The Chatbot UI: <code>streamlit_app.py</code></h3>
<p>This file is the heart of our Streamlit app. It's responsible for:</p>
<ul>
<li>Providing a chat interface for user input.</li>
<li>Displaying the response from the model.</li>
<li>Maintaining the conversation history.</li>
</ul>
<p>While you would typically use Streamlit's <code>session_state</code> to store the
conversation history manually, the Vertex AI SDK simplifies this. We'll use a
<code>ChatSession</code> object from the SDK, which automatically handles the history for
us. We just need to store this one object in <code>st.session_state</code> to make our
chat stateful.</p>
<p>You can see the core logic below:</p>
<pre><code class="language-python">import streamlit as st
import llm

# Initialize chat session in Streamlit's session state.
# This will be run only once, on the first run of the session.
if &quot;chat_session&quot; not in st.session_state:
    st.session_state.chat_session = llm.start_chat()

# Display chat history from the session state
for message in st.session_state.chat_session.history:
    with st.chat_message(&quot;assistant&quot; if message.role == &quot;model&quot; else &quot;user&quot;):
        st.markdown(message.parts[0].text)
</code></pre>
<h3 id="the-brains-of-the-operation-llmpy">The Brains of the Operation: <code>llm.py</code></h3>
<p>This file handles all the communication with the Gemini 2.5 Flash model. As we
are using GenAI SDK, we can use environment variables to set up the required
details for authentication. Also, GenAI SDK provides us with <code>Client</code> class
which we can use to create a chat session and send messages to the Gemini Model
and receive.</p>
<pre><code class="language-python">from google import genai

# Using environment variables to pass essential parameters to the client.
client = genai.Client()

# Create chat session
chat_session = client.chats.create(&quot;gemini-2.0-flash-lite-001&quot;)
</code></pre>
<h4 id="to-run-chatbot-in-cli">To run chatbot in CLI</h4>
<pre><code class="language-bash">python llm.py
</code></pre>
<h4 id="to-run-streamlit-chatbot">To run streamlit chatbot</h4>
<pre><code class="language-bash">streamlit run streamlit_app.py
</code></pre>
<h2 id="deploy-the-application">Deploy the application</h2>
<p>You can deploy your chatbot to Google Cloud Run and share it with the world.</p>
<p>Use the <code>deploy.sh</code> script to package your app into a Docker image and send it
to the Google Artifact Registry.</p>
<pre><code class="language-bash">./deploy.sh
</code></pre>
<p>The script will then deploy your app to Cloud Run, making it live on the web.</p>
<h2 id="you-did-it">You Did It!</h2>
<p>High five! You've built and deployed a fully functional chatbot with Streamlit
and Gemini Pro. You've seen how to use the new Generative AI SDK and its chat
features to create a more natural and engaging conversational experience. Now,
go ahead and have a chat with your new AI friend!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2025 © M Sampath Kumar
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>