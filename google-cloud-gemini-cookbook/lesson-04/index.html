
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Personal blog of Sampath Kumar M" name="description"/>
<meta content="Sampath Kumar" name="author"/>
<link href="../lesson-03/" rel="prev"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.15" name="generator"/>
<title>Lesson-04 - Google Cloud - Gemini Cookbook</title>
<link href="../../assets/stylesheets/main.342714a4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#blog-post-lesson-04">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Google Cloud - Gemini Cookbook" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Google Cloud - Gemini Cookbook">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Google Cloud - Gemini Cookbook
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Lesson-04
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    Github
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Google Cloud - Gemini Cookbook" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Google Cloud - Gemini Cookbook">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"></path></svg>
</a>
    Google Cloud - Gemini Cookbook
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    Github
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Welcome to My Digital Garden
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Gemini Cookbook
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Gemini Cookbook
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lesson-01/">
<span class="md-ellipsis">
    Lesson-01
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lesson-02/">
<span class="md-ellipsis">
    Lesson-02
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lesson-03/">
<span class="md-ellipsis">
    Lesson-03
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Lesson-04
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Lesson-04
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#blog-post-lesson-04">
<span class="md-ellipsis">
      Blog Post: Lesson 04
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unlock-enterprise-ai-grounding-gemini-with-rag-and-google-cloud-search">
<span class="md-ellipsis">
      🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀
    </span>
</a>
<nav aria-label="🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-grounding-llms-combating-hallucinations-with-external-knowledge">
<span class="md-ellipsis">
      1. Grounding LLMs: Combating Hallucinations with External Knowledge 🛡️
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-introduction-to-retrieval-augmented-generation-rag-your-llms-research-assistant">
<span class="md-ellipsis">
      2. Introduction to Retrieval Augmented Generation (RAG): Your LLM's Research Assistant 🧑‍🎓
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-application-architecture">
<span class="md-ellipsis">
      3. Application Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-rag-implementation-flow">
<span class="md-ellipsis">
      4. RAG Implementation Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-application-screenshots">
<span class="md-ellipsis">
      5. Application Screenshots
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conclusion">
<span class="md-ellipsis">
      Conclusion
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#blog-post-lesson-04">
<span class="md-ellipsis">
      Blog Post: Lesson 04
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unlock-enterprise-ai-grounding-gemini-with-rag-and-google-cloud-search">
<span class="md-ellipsis">
      🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀
    </span>
</a>
<nav aria-label="🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-grounding-llms-combating-hallucinations-with-external-knowledge">
<span class="md-ellipsis">
      1. Grounding LLMs: Combating Hallucinations with External Knowledge 🛡️
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-introduction-to-retrieval-augmented-generation-rag-your-llms-research-assistant">
<span class="md-ellipsis">
      2. Introduction to Retrieval Augmented Generation (RAG): Your LLM's Research Assistant 🧑‍🎓
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-application-architecture">
<span class="md-ellipsis">
      3. Application Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-rag-implementation-flow">
<span class="md-ellipsis">
      4. RAG Implementation Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-application-screenshots">
<span class="md-ellipsis">
      5. Application Screenshots
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conclusion">
<span class="md-ellipsis">
      Conclusion
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Lesson-04</h1>
<h3 id="blog-post-lesson-04">Blog Post: Lesson 04</h3>
<h2 id="unlock-enterprise-ai-grounding-gemini-with-rag-and-google-cloud-search">🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀</h2>
<p>Welcome back! 👋 In Lesson 03, we built fast, relevant chatbots using direct
context methods like In-Context Learning ✨, System Instructions 📜, and Context
Caching 📦. Those are fantastic for quick demos and consistent persona. But what
if your chatbot needs to know the <em>latest</em> company sales figures, details from
an obscure internal report, or specific client history? That's where Large
Language Models (LLMs) hit their limit – they hallucinate! 😵‍💫</p>
<p>Today, we tackle the next frontier: <strong>Grounding</strong> your Gemini models in
real-time, external, and even proprietary data using <strong>Retrieval Augmented
Generation (RAG)</strong>, with Google Cloud Search as your powerful engine. 🔍</p>
<hr/>
<h3 id="1-grounding-llms-combating-hallucinations-with-external-knowledge">1. Grounding LLMs: Combating Hallucinations with External Knowledge 🛡️</h3>
<p>LLMs are brilliant pattern matchers, trained on vast amounts of internet data.
However, their knowledge is frozen at their last training cut-off date. They
don't have real-time access to the internet, nor do they inherently know your
company's internal documents, recent sales data, or specific client
interactions. When asked about such information, they might:</p>
<ul>
<li><strong>Refuse to answer:</strong> "I don't have information on that." 🤷‍♀️</li>
<li><strong>Generate generic or outdated information:</strong> "According to general industry
  trends..." 🗓️</li>
<li><strong>"Hallucinate":</strong> Make up plausible-sounding but entirely false information.
  This is the most dangerous! 🚨</li>
</ul>
<p><strong>Example: A Chatbot Hallucinating on Project Status</strong></p>
<p>Let's revisit our chatbot. If you ask about specific, latest information:</p>
<pre><code>User: What is the status of our CRM project - Alpha?

Model: I'm sorry, but I don't have access to specific project details like the status of your CRM project Alpha. 😟 I can only provide general information.

User: What is today's date ?

Model: Today's date is June 16, 2024. 📅
</code></pre>
<p>This is a problem. In enterprise settings, accuracy is paramount. We need a way
to connect Gemini to our actual, verifiable knowledge. This is called
<strong>grounding</strong>. 🌱</p>
<hr/>
<h3 id="2-introduction-to-retrieval-augmented-generation-rag-your-llms-research-assistant">2. Introduction to Retrieval Augmented Generation (RAG): Your LLM's Research Assistant 🧑‍🎓</h3>
<p>Retrieval Augmented Generation (RAG) is an architectural pattern that solves
the hallucination problem by giving LLMs access to external, up-to-date, and
domain-specific information.</p>
<p>Think of RAG as giving your LLM a brilliant research assistant: 🧐</p>
<ol>
<li><strong>Retrieve:</strong> When you ask a question, the "research assistant" first
   searches a vast library (your knowledge base) for relevant documents or
   snippets. 📚</li>
<li><strong>Augment:</strong> It then takes the most relevant findings and gives them to the
   LLM. 🧩</li>
<li><strong>Generate:</strong> Finally, the LLM uses this specific, retrieved information
   (along with your original query) to formulate an accurate and grounded
   response. ✅</li>
</ol>
<p><strong>Key Components of a RAG System:</strong></p>
<ul>
<li><strong>Knowledge Base:</strong> Your source of truth – internal documents, databases,
  websites, etc. 📁</li>
<li><strong>Retriever:</strong> A system (like a vector database combined with an embedding
  model, or a powerful search engine like Google Cloud Search) that can quickly
  find the most relevant pieces of information from your knowledge base based
  on a query. 🔎</li>
<li><strong>Generator:</strong> The LLM (Gemini) that synthesizes the answer using the
  retrieved context. 🧠</li>
</ul>
<p><strong>Benefits of RAG:</strong></p>
<ul>
<li><strong>Factuality:</strong> Grounding responses in real data dramatically reduces
  hallucinations. ✅</li>
<li><strong>Currency:</strong> LLMs can answer questions about information that wasn't in
  their training data or is constantly changing. ⏰</li>
<li><strong>Domain-Specific Knowledge:</strong> Access to proprietary or niche topics. 💼</li>
<li><strong>Attribution:</strong> Potential to show users <em>where</em> the information came from
  (e.g., "Source: Policy Manual v2.1"). 🔗</li>
</ul>
<p><strong>RAG vs. Context Cache: A Crucial Distinction</strong> 🚨</p>
<p>It's vital to differentiate RAG from Context Caching (Lesson 03).</p>
<ul>
<li><strong>Context Cache:</strong> <em>Reuses</em> small, static pieces of pre-loaded or
  conversational context. It's about efficiency for fixed data, avoiding
  redundant token usage. Think of it as a persistent "sticky note" or
  short-term memory for repeated instructions or small data blocks. 📝</li>
<li><strong>RAG:</strong> <em>Dynamically retrieves</em> specific, often large, and always relevant
  chunks of information from a vast, external knowledge base <em>on demand</em> for
  each query. It's about expanding the LLM's factual knowledge with new,
  current, or private data. 🌐</li>
</ul>
<hr/>
<h3 id="3-application-architecture">3. Application Architecture</h3>
<p>This application is designed to be a flexible and extensible chatbot that can
leverage different grounding techniques. Here's a breakdown of the core
components:</p>
<div class="mermaid">graph TD
    subgraph User Interface
        A[streamlit_app.py]
    end

    subgraph Core Logic
        B(llm.py)
    end

    subgraph Optional Add-ons
        C[cache.py]
        D[rag.py]
    end

    A -- "Initializes and calls" --&gt; B
    B -- "Optionally uses" --&gt; C
    B -- "Optionally uses" --&gt; D
</div>
<p><strong>Core Application Logic:</strong></p>
<ul>
<li><strong><code>streamlit_app.py</code> (UI):</strong> This is the user-facing component of the
  application, built with Streamlit. It provides the chat interface, handles
  user input, and displays the LLM's responses. It's the "skin" of our
  application.</li>
<li><strong><code>llm.py</code> (The Brain):</strong> This module is the central nervous system of our
  chatbot. It's responsible for all interactions with the Gemini API. It takes
  the user's prompt, and based on the selected mode (Default, Context Cache, or
  RAG), it constructs the appropriate request to the Gemini model.</li>
<li><strong><code>cache.py</code> (Optional Battery):</strong> This module manages the Context Cache.
  When the "Use Context Cache" option is selected, <code>llm.py</code> uses this module to
  create and manage a cache of context, which can be reused across
  conversations to improve speed and reduce costs.</li>
<li><strong><code>rag.py</code> (Optional Battery):</strong> This module handles the Retrieval-Augmented
  Generation (RAG) functionality. When the "Use RAG as Tool" option is
  selected, <code>llm.py</code> uses this module to create and manage a RAG corpus. This
  allows the LLM to retrieve information from a knowledge base to answer
  questions.</li>
</ul>
<p><strong>Code Links:</strong></p>
<ul>
<li><a href="https://github.com/msampathkumar/msampathkumar.github.io/tree/master/docs/google-cloud-gemini-cookbook/lesson-04/streamlit_app.py">streamlit_app.py</a></li>
<li><a href="https://github.com/msampathkumar/msampathkumar.github.io/tree/master/docs/google-cloud-gemini-cookbook/lesson-04/llm.py">llm.py</a></li>
<li><a href="https://github.com/msampathkumar/msampathkumar.github.io/tree/master/docs/google-cloud-gemini-cookbook/lesson-04/cache.py">cache.py</a></li>
<li><a href="https://github.com/msampathkumar/msampathkumar.github.io/tree/master/docs/google-cloud-gemini-cookbook/lesson-04/rag.py">rag.py</a></li>
</ul>
<h3 id="4-rag-implementation-flow">4. RAG Implementation Flow</h3>
<p>Here’s a more detailed look at how the RAG process works within our application
when the "Use RAG as Tool" option is enabled:</p>
<div class="mermaid">sequenceDiagram
    participant User
    participant Streamlit UI (streamlit_app.py)
    participant LLM Brain (llm.py)
    participant RAG Corpus (rag.py)
    participant Gemini API

    User-&gt;&gt;Streamlit UI (streamlit_app.py): Enters a prompt
    Streamlit UI (streamlit_app.py)-&gt;&gt;LLM Brain (llm.py): Sends prompt to get chat session
    LLM Brain (llm.py)-&gt;&gt;RAG Corpus (rag.py): Initializes RAG corpus
    RAG Corpus (rag.py)--&gt;&gt;LLM Brain (llm.py): Returns RAG corpus name
    LLM Brain (llm.py)-&gt;&gt;Gemini API: Creates chat session with RAG tool
    Gemini API--&gt;&gt;LLM Brain (llm.py): Returns chat session
    LLM Brain (llm.py)--&gt;&gt;Streamlit UI (streamlit_app.py): Returns chat session
    Streamlit UI (streamlit_app.py)-&gt;&gt;LLM Brain (llm.py): Sends user prompt
    LLM Brain (llm.py)-&gt;&gt;Gemini API: Sends prompt to Gemini
    Gemini API-&gt;&gt;RAG Corpus (rag.py): Retrieves relevant documents
    RAG Corpus (rag.py)--&gt;&gt;Gemini API: Returns documents
    Gemini API--&gt;&gt;LLM Brain (llm.py): Generates response based on retrieved documents
    LLM Brain (llm.py)--&gt;&gt;Streamlit UI (streamlit_app.py): Returns grounded response
    Streamlit UI (streamlit_app.py)--&gt;&gt;User: Displays response
</div>
<h3 id="5-application-screenshots">5. Application Screenshots</h3>
<p><img alt="Demo" src="cli-demo.gif"/></p>
<p>Youtube: https://youtu.be/JIx4Fr4V6Mw</p>
<hr/>
<h2 id="conclusion">Conclusion</h2>
<p>This lesson demonstrated how to ground Gemini models with external knowledge
using RAG. By leveraging RAG, we can build more accurate, factual, and useful
AI applications that can reason about private and real-time data.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright 2025 © M Sampath Kumar
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/msampathkumar" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://hub.docker.com/u/msampathkumar" rel="noopener" target="_blank" title="hub.docker.com">
<svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"></path></svg>
</a>
<a class="md-social__link" href="https://pypi.org/user/sampath/" rel="noopener" target="_blank" title="pypi.org">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"></path></svg>
</a>
<a class="md-social__link" href="https://bsky.app/profile/sampathm.bsky.social" rel="noopener" target="_blank" title="bsky.app">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"></path></svg>
</a>
<a class="md-social__link" href="https://www.linkedin.com/in/msampathkumar/" rel="noopener" target="_blank" title="www.linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>