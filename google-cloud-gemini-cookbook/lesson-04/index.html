
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal blog of Sampath Kumar M">
      
      
        <meta name="author" content="Sampath Kumar">
      
      
      
        <link rel="prev" href="../lesson-03/">
      
      
        <link rel="next" href="../..">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Lesson-04 - Google Cloud - Gemini Cookbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog-post-lesson-04" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Google Cloud - Gemini Cookbook" class="md-header__button md-logo" aria-label="Google Cloud - Gemini Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Google Cloud - Gemini Cookbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lesson-04
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Google Cloud - Gemini Cookbook" class="md-nav__button md-logo" aria-label="Google Cloud - Gemini Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m362.7 19.3-48.4 48.4 130 130 48.4-48.4c25-25 25-65.5 0-90.5l-39.4-39.5c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L151 475.7c14.1-4.2 27-11.8 37.4-22.2l233.3-233.2z"/></svg>

    </a>
    Google Cloud - Gemini Cookbook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/msampathkumar/msampathkumar.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Gemini Cookbook
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Gemini Cookbook
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-02
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lesson-03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lesson-03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lesson-04
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lesson-04
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#blog-post-lesson-04" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Post: Lesson 04
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unlock-enterprise-ai-grounding-gemini-with-rag-and-google-cloud-search" class="md-nav__link">
    <span class="md-ellipsis">
      🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-grounding-llms-combating-hallucinations-with-external-knowledge" class="md-nav__link">
    <span class="md-ellipsis">
      1. Grounding LLMs: Combating Hallucinations with External Knowledge 🛡️
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-introduction-to-retrieval-augmented-generation-rag-your-llms-research-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      2. Introduction to Retrieval Augmented Generation (RAG): Your LLM's Research Assistant 🧑‍🎓
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implementing-rag-with-google-cloud-search-and-gemini" class="md-nav__link">
    <span class="md-ellipsis">
      3. Implementing RAG with Google Cloud Search and Gemini 🛠️
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to My Digital Garden
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#blog-post-lesson-04" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Post: Lesson 04
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unlock-enterprise-ai-grounding-gemini-with-rag-and-google-cloud-search" class="md-nav__link">
    <span class="md-ellipsis">
      🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-grounding-llms-combating-hallucinations-with-external-knowledge" class="md-nav__link">
    <span class="md-ellipsis">
      1. Grounding LLMs: Combating Hallucinations with External Knowledge 🛡️
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-introduction-to-retrieval-augmented-generation-rag-your-llms-research-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      2. Introduction to Retrieval Augmented Generation (RAG): Your LLM's Research Assistant 🧑‍🎓
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implementing-rag-with-google-cloud-search-and-gemini" class="md-nav__link">
    <span class="md-ellipsis">
      3. Implementing RAG with Google Cloud Search and Gemini 🛠️
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Lesson-04</h1>

<h3 id="blog-post-lesson-04">Blog Post: Lesson 04</h3>
<h2 id="unlock-enterprise-ai-grounding-gemini-with-rag-and-google-cloud-search">🔓 Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀</h2>
<p>Welcome back! 👋 In Lesson 03, we built fast, relevant chatbots using direct
context methods like In-Context Learning ✨, System Instructions 📜, and Context
Caching 📦. Those are fantastic for quick demos and consistent persona. But what
if your chatbot needs to know the <em>latest</em> company sales figures, details from
an obscure internal report, or specific client history? That's where Large
Language Models (LLMs) hit their limit – they hallucinate! 😵‍💫</p>
<p>Today, we tackle the next frontier: <strong>Grounding</strong> your Gemini models in
real-time, external, and even proprietary data using <strong>Retrieval Augmented
Generation (RAG)</strong>, with Google Cloud Search as your powerful engine. 🔍</p>
<hr />
<h3 id="1-grounding-llms-combating-hallucinations-with-external-knowledge">1. Grounding LLMs: Combating Hallucinations with External Knowledge 🛡️</h3>
<p>LLMs are brilliant pattern matchers, trained on vast amounts of internet data.
However, their knowledge is frozen at their last training cut-off date. They
don't have real-time access to the internet, nor do they inherently know your
company's internal documents, recent sales data, or specific client
interactions. When asked about such information, they might:</p>
<ul>
<li><strong>Refuse to answer:</strong> "I don't have information on that." 🤷‍♀️</li>
<li><strong>Generate generic or outdated information:</strong> "According to general industry
  trends..." 🗓️</li>
<li><strong>"Hallucinate":</strong> Make up plausible-sounding but entirely false information.
  This is the most dangerous! 🚨</li>
</ul>
<p><strong>Example: A Chatbot Hallucinating on Proprietary Data</strong></p>
<p>Let's revisit our chatbot. If you ask about specific, sensitive internal data:</p>
<pre><code>User: What was our Q1 revenue for the 'Project Phoenix' initiative for the EMEA region?
Chatbot (Gemini, no grounding): For Project Phoenix in 

Q1, the EMEA region generated an estimated $12.5 million, driven by strong performance in software licensing. We anticipate continued growth...

</code></pre>
<p><em>(Imagine a screenshot here: A Streamlit UI with the user's highly specific
financial query and a chatbot response that sounds confident but is entirely
fabricated, as the data is proprietary and not in Gemini's training. A big red
X emoji to emphasize the hallucination.)</em> ❌</p>
<p>This is a problem. In enterprise settings, accuracy is paramount. We need a way
to connect Gemini to our actual, verifiable knowledge. This is called
<strong>grounding</strong>. 🌱</p>
<hr />
<h3 id="2-introduction-to-retrieval-augmented-generation-rag-your-llms-research-assistant">2. Introduction to Retrieval Augmented Generation (RAG): Your LLM's Research Assistant 🧑‍🎓</h3>
<p>Retrieval Augmented Generation (RAG) is an architectural pattern that solves
the hallucination problem by giving LLMs access to external, up-to-date, and
domain-specific information.</p>
<p>Think of RAG as giving your LLM a brilliant research assistant: 🧐</p>
<ol>
<li><strong>Retrieve:</strong> When you ask a question, the "research assistant" first
   searches a vast library (your knowledge base) for relevant documents or
   snippets. 📚</li>
<li><strong>Augment:</strong> It then takes the most relevant findings and gives them to the
   LLM. 🧩</li>
<li><strong>Generate:</strong> Finally, the LLM uses this specific, retrieved information
   (along with your original query) to formulate an accurate and grounded
   response. ✅</li>
</ol>
<p><strong>Key Components of a RAG System:</strong></p>
<ul>
<li><strong>Knowledge Base:</strong> Your source of truth – internal documents, databases,
  websites, etc. 📁</li>
<li><strong>Retriever:</strong> A system (like a vector database combined with an embedding
  model, or a powerful search engine like Google Cloud Search) that can quickly
  find the most relevant pieces of information from your knowledge base based
  on a query. 🔎</li>
<li><strong>Generator:</strong> The LLM (Gemini) that synthesizes the answer using the
  retrieved context. 🧠</li>
</ul>
<p><strong>Benefits of RAG:</strong></p>
<ul>
<li><strong>Factuality:</strong> Grounding responses in real data dramatically reduces
  hallucinations. ✅</li>
<li><strong>Currency:</strong> LLMs can answer questions about information that wasn't in
  their training data or is constantly changing. ⏰</li>
<li><strong>Domain-Specific Knowledge:</strong> Access to proprietary or niche topics. 💼</li>
<li><strong>Attribution:</strong> Potential to show users <em>where</em> the information came from
  (e.g., "Source: Policy Manual v2.1"). 🔗</li>
</ul>
<p><strong>RAG vs. Context Cache: A Crucial Distinction</strong> 🚨</p>
<p>It's vital to differentiate RAG from Context Caching (Lesson 03).</p>
<ul>
<li><strong>Context Cache:</strong> <em>Reuses</em> small, static pieces of pre-loaded or
  conversational context. It's about efficiency for fixed data, avoiding
  redundant token usage. Think of it as a persistent "sticky note" or
  short-term memory for repeated instructions or small data blocks. 📝</li>
<li><strong>RAG:</strong> <em>Dynamically retrieves</em> specific, often large, and always relevant
  chunks of information from a vast, external knowledge base <em>on demand</em> for
  each query. It's about expanding the LLM's factual knowledge with new,
  current, or private data. 🌐</li>
</ul>
<hr />
<h3 id="3-implementing-rag-with-google-cloud-search-and-gemini">3. Implementing RAG with Google Cloud Search and Gemini 🛠️</h3>
<p>For enterprise applications, Google Cloud Search is an incredibly powerful
component for building a RAG system. It's designed to index vast amounts of
internal data, respect user permissions (ACLs), and provide highly relevant
search results – making it an ideal retriever for your RAG architecture. 📈</p>
<p><strong>How Google Cloud Search Fits into RAG:</strong></p>
<p>Google Cloud Search acts as the intelligent "Retriever" in your RAG pipeline.
You ingest your documents (Google Workspace files, Confluence pages,
SharePoint, custom databases, etc.) into Cloud Search. It handles all the
complex indexing, understanding, and permission management. When a user asks a
question, your application queries Cloud Search first. ➡️</p>
<p><strong>High-Level Implementation Flow (Conceptual Diagram):</strong></p>
<p><em>(Imagine a diagram here: A flowchart implemented with HTML/CSS showing the
flow from "User Query (Streamlit)" -&gt; "Send to Google Cloud Search" -&gt;
"Retrieve Relevant Snippets" -&gt; "Augment Prompt" -&gt; "Send to Gemini" -&gt; "Gemini
Generates Response" -&gt; "Display Grounded Response (Streamlit, with Source)".
Each step could have a small icon.)</em> 📊</p>
<p><strong>Code Sample: llm.py (LLM &amp; Retrieval Logic)</strong></p>
<p>Code snippet</p>
<pre><code>
</code></pre>
<p><strong>Code Sample: app.py (Streamlit UI for RAG)</strong></p>
<p>Code snippet</p>
<pre><code>
import streamlit as st
import os
import llm # Our custom LLM interaction module

st.set_page_config(layout=&quot;wide&quot;)
st.title(&quot;Unlock Enterprise AI: Grounding Gemini with RAG and Google Cloud Search 🚀&quot;)
st.markdown(&quot;Ask questions about our mock internal documents, and Gemini will provide grounded answers. 🎯&quot;)

# --- Simulated Knowledge Base (In-Memory Documents) ---
# In a real RAG system, this would be a vast, external knowledge base
# indexed by Google Cloud Search or a vector database.
MOCK_INTERNAL_DOCS = [
    {
        &quot;title&quot;: &quot;Project Phoenix Q1 2025 Report 📈&quot;,
        &quot;content&quot;: &quot;&quot;&quot;
        **Project Phoenix - Q1 2025 Performance Summary**
        The 'Project Phoenix' initiative demonstrated strong performance in Q1 2025.
        **Revenue:** EMEA region generated $10.5 million (up 15% YoY), driven by 5 new client wins in Germany and France. 💰
        North America achieved $8.2 million (up 10% YoY), fueled by existing client expansion. 🇺🇸🇨🇦
        **Key Milestones:**
        - Beta launch completed for Phase 2 in early February. ✅
        - Integration with existing CRM systems reached 80% completion by end of March. 🔗
        - Onboarding 3 new sales reps in EMEA. 👥
        **Challenges:** Supply chain disruptions impacted hardware delivery by 5%. 📉
        &quot;&quot;&quot;
    },
    {
        &quot;title&quot;: &quot;IT Policy: New Hardware Requests 💻&quot;,
        &quot;content&quot;: &quot;&quot;&quot;
        **IT Policy: Hardware Procurement and New Laptop Requests**
        Employees requiring new laptops or hardware must submit a request via the IT Service Portal. 🛠️
        **Process:**
        1. Fill out the 'New Hardware Request' form on the IT Service Portal. ✍️
        2. Obtain manager approval within the portal. ✅
        3. IT procurement will review the request (allow 3-5 business days). 🗓️
        4. Device ordered and configured (delivery typically 2-4 weeks). 🚚
        **Approval Criteria:** Requests are evaluated based on job role requirements and existing equipment age (typically 3+ years). 📏
        &quot;&quot;&quot;
    },
    {
        &quot;title&quot;: &quot;HR Handbook: Vacation Policy 🏖️&quot;,
        &quot;content&quot;: &quot;&quot;&quot;
        **HR Handbook: Vacation and Leave Policy**
        All full-time employees accrue 20 days of paid vacation leave annually. ☀️
        Vacation requests must be submitted at least 4 weeks in advance via the HR Portal. 📅
        Managers must approve requests within 5 business days. ✅
        Unused vacation days can be carried over for up to 5 days to the next calendar year. Any days above this limit are forfeited. ⏳
        Maximum carry-over is 5 days.
        &quot;&quot;&quot;
    }
]

# --- Streamlit UI ---
st.header(&quot;Simulated RAG Chatbot 💬&quot;)
st.write(&quot;This chatbot uses a *simulated* internal knowledge base to provide grounded answers. Imagine this data is indexed by Google Cloud Search! 🔍&quot;)

if &quot;messages_rag&quot; not in st.session_state:
    st.session_state.messages_rag = []

for message in st.session_state.messages_rag:
    with st.chat_message(message[&quot;role&quot;]):
        st.markdown(message[&quot;content&quot;])

if prompt := st.chat_input(&quot;Ask a question about our internal documents... 🤔&quot;):
    st.session_state.messages_rag.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt})
    with st.chat_message(&quot;user&quot;):
        st.markdown(prompt)

    with st.spinner(&quot;Searching internal knowledge base and generating response... ⏳&quot;):
        # 1. Simulate Retrieval using our llm.py helper
        retrieved_docs = llm.retrieve_relevant_docs_simulated(prompt, MOCK_INTERNAL_DOCS)

        # 2. Augment and Generate using our llm.py helper
        gemini_response = llm.get_grounded_response_from_gemini(prompt, retrieved_docs)

    st.session_state.messages_rag.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: gemini_response})
    with st.chat_message(&quot;assistant&quot;):
        st.markdown(gemini_response)


</code></pre>
<p><strong>To Deploy This Application on Google Cloud Run:</strong></p>
<p>To deploy this Streamlit application, you will need two Python files: app.py
(for the Streamlit UI) and llm.py (for the LLM interaction logic).</p>
<ol>
<li><strong>Project Structure:</strong> Create a directory for your project (e.g.,
   lesson04_rag_app). Inside this directory, place the following files:</li>
<li>app.py (content from the <strong>app.py (Streamlit UI for RAG)</strong> block above)</li>
<li>llm.py (content from the <strong>llm.py (LLM &amp; Retrieval Logic)</strong> block above)</li>
<li>requirements.txt (see step 2)</li>
<li><strong>Create requirements.txt:</strong> In your project directory, create a file named
   requirements.txt with the following content:</li>
</ol>
<pre><code>
streamlit
google-generativeai

</code></pre>
<p>3.
1. <strong>Set up your Google Cloud Project:</strong>
   - Ensure you have the gcloud CLI installed and configured.
   - Select your Google Cloud Project: gcloud config set project
     \<YOUR_PROJECT_ID>
   - Replace \<YOUR_PROJECT_ID> with your actual Google Cloud Project ID.
1. <strong>Enable APIs:</strong> In your Google Cloud Project, enable the Cloud Run API and
   the Generative Language API.
1. <strong>Get your Gemini API Key:</strong> Obtain an API key
   from<a href="https://aistudio.google.com/app/apikey"> Google AI Studio</a>.
1. <strong>Build and Deploy:</strong> Open your terminal in your project directory (where
   app.py, llm.py, and requirements.txt are saved), and run:
1. Bash</p>
<pre><code>
gcloud builds submit --tag gcr.io/&lt;YOUR_PROJECT_ID&gt;/lesson04-rag-chatbot
gcloud run deploy lesson04-rag-chatbot --image gcr.io/&lt;YOUR_PROJECT_ID&gt;/lesson04-rag-chatbot \
    --platform managed \
    --region &lt;YOUR_REGION&gt; \
    --allow-unauthenticated \
    --set-env-vars GOOGLE_API_KEY=&quot;YOUR_API_KEY&quot;

</code></pre>
<ol>
<li>\
   Replace \<YOUR_PROJECT_ID> and \<YOUR_REGION> (e.g., us-central1) with your
   actual values. \
   Replace "YOUR_API_KEY" with your actual Gemini API Key obtained from Google
   AI Studio. \
   This command will build a Docker image of your Streamlit app and deploy it
   to Cloud Run. You'll get a public URL to access your live, RAG-simulated
   chatbot! 🎉</li>
</ol>
<hr />
<h2 id="conclusion">Conclusion</h2>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2025 © M Sampath Kumar
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>